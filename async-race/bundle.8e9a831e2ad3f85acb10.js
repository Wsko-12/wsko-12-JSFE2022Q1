(()=>{"use strict";var e={731:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(81),s=n.n(a),i=n(645),r=n.n(i),o=n(667),l=n.n(o),d=new URL(n(885),n.b),c=r()(s());c.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;700;800&display=swap);"]),c.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=VT323&display=swap);"]);var u=l()(d);c.push([e.id,'*{box-sizing:border-box}html{font-size:16px;width:100%;height:100%}@media(max-width: 767px){html{font-size:12px}}@media(max-width: 425px){html{font-size:10px}}html,body{font-family:"Rubik",sans-serif;margin:0;padding:0}html{background-color:#f4f3d6;background-image:url('+u+')}body{padding:20px;min-height:100%;background-color:rgba(244,243,214,.9)}@media(max-width: 425px){body{padding:5px}}.button{border:none;font-weight:800;text-transform:uppercase;font-size:1rem;padding:15px;border-radius:10px;border:2px solid #303030;box-shadow:4px 4px 0px #303030;color:#303030;margin:0 2px;transition-duration:.1s;cursor:pointer}.button:hover{transform:translate(2px, 2px);box-shadow:2px 2px 0px #303030}.button:active{transform:translate(4px, 4px);box-shadow:none}.button:disabled,.button:disabled:hover{transform:translate(0px, 0px);color:#737373;background-color:#dcdcdc !important;border:2px solid #737373;box-shadow:4px 4px 0px #737373}@media(max-width: 425px){.button{padding:10px}}.display{border:2px solid #303030;overflow:hidden;background-color:#4a4a4a;box-shadow:inset 5px 5px 0px #303030;border-radius:20px}.display__inner{width:100%;height:100%;background-color:#588c61;box-shadow:inset 5px 5px 0px #303030;border-radius:20px;color:#00ff2a;font-family:"VT323",monospace;font-weight:800;text-shadow:0px 0px 4px #4a4a4a;top:1px;-webkit-mask-image:repeating-linear-gradient(rgb(0, 0, 0) 1px, rgba(0, 0, 0, 0) 1px, rgba(0, 0, 0, 0) 2px, rgb(0, 0, 0) 2px, rgb(0, 0, 0) 3px, rgba(0, 0, 0, 0) 3px);mask-image:repeating-linear-gradient(rgb(0, 0, 0) 1px, rgba(0, 0, 0, 0) 1px, rgba(0, 0, 0, 0) 2px, rgb(0, 0, 0) 2px, rgb(0, 0, 0) 3px, rgba(0, 0, 0, 0) 3px)}',""]);const p=c},227:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81),s=n.n(a),i=n(645),r=n.n(i)()(s());r.push([e.id,".car-item{width:100%;list-style-type:none;margin:0;overflow:hidden}.car-item_garage{padding:10px;margin-bottom:20px;background-color:#fff;border:3px solid #303030;border-radius:15px;box-shadow:5px 5px 0px #303030}.car-item__header{display:flex;flex-wrap:wrap;align-items:center;margin-bottom:15px}.car-item__header>h3{order:2;flex-grow:1;font-size:2.5rem;margin:0;margin-left:20px}@media(max-width: 767px){.car-item__header>h3{order:1;width:100%;margin-left:5px;font-size:2rem}}.car-item__header .button[data-button-action=select]{order:1;background-color:#6293f5}@media(max-width: 767px){.car-item__header .button[data-button-action=select]{order:2}}.car-item__header .button[data-button-action=remove]{order:3;background-color:#f5627f}.car-item__body{display:flex;gap:10px}.car-item__track{flex-grow:1;display:flex;align-items:flex-end}@media(max-width: 767px){.car-item__track{border-radius:10px}}.car-item__track_inner{padding-top:20px}.car-item__icon-container_garage{width:150px;position:relative;left:3px}@media(max-width: 767px){.car-item__icon-container_garage{width:100px}}@media(max-width: 425px){.car-item__icon-container_garage{width:50px}}.car-item__icon-container_winners{width:70px;position:relative}@media(max-width: 425px){.car-item__icon-container_winners{width:40px}}.car-item__icon-broke{display:none;font-weight:800;width:30px;height:30px;top:0px;right:5px;background-color:#fff;box-shadow:5px 5px 0px #303030;border:4px solid red;border-radius:25px;position:absolute;align-items:center;justify-content:center}@media(max-width: 767px){.car-item__icon-broke{font-size:2rem}}@media(max-width: 425px){.car-item__icon-broke{font-size:2rem;width:10px;height:10px}}.car-item__control-btn{width:50px;height:50px;padding:0 !important;border-radius:100% !important}.car-item__stop{background-color:#f56262}.car-item__start{background-color:#9ff562}",""]);const o=r},481:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81),s=n.n(a),i=n(645),r=n.n(i)()(s());r.push([e.id,".table__title{font-size:6rem;margin:0;margin-bottom:10px;text-align:center}@media(max-width: 767px){.table__title{font-size:4.5rem}}@media(max-width: 425px){.table__title{font-size:4rem}}.table__subtitle{font-size:3rem;margin:0;margin-bottom:10px}",""]);const o=r},430:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81),s=n.n(a),i=n(645),r=n.n(i)()(s());r.push([e.id,".redactor{display:flex;gap:10px}@media(max-width: 425px){.redactor{flex-wrap:wrap;justify-content:flex-start}}.redactor__input_inner{font-size:1.7rem;font-weight:800;background-color:none;border:0}.redactor__input_inner:disabled{opacity:0}@media(max-width: 767px){.redactor__input_inner{font-size:1.6rem;max-width:100%}}@media(max-width: 425px){.redactor__input_inner{font-size:3rem;padding:10px;width:100%}}@media(max-width: 425px){.redactor__input{width:100%}}.redactor__color{background-color:rgba(255,255,255,0);-webkit-appearance:none;border:none;width:32px;height:32px;cursor:pointer}@media(max-width: 425px){.redactor__color{width:100px}}.redactor__color:disabled{opacity:.5}.redactor__color::-webkit-color-swatch-wrapper{padding:0}.redactor__color::-webkit-color-swatch{height:50px;border-radius:10px;border:2px solid #303030;box-shadow:3px 3px 0px #303030}@media(max-width: 425px){.redactor__color::-webkit-color-swatch{height:40px}}@media(max-width: 425px){.redactor__button{font-size:1.5rem !important}}",""]);const o=r},280:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81),s=n.n(a),i=n(645),r=n.n(i)()(s());r.push([e.id,".editor{display:inline-flex;flex-direction:column;padding:20px;border:3px #303030 solid;gap:20px;border-radius:20px;box-shadow:5px 5px 0px #303030;background-color:#62c9f5;margin-bottom:20px;background:repeating-linear-gradient(45deg, #62c9f5 10px, #c462f5 10px, #c462f5 20px, #62c9f5 20px, #62c9f5 30px, #c462f5 30px)}@media(max-width: 767px){.editor{position:relative;left:50%;transform:translate(-50%, 0%);padding:10px;max-width:100%}}@media(max-width: 425px){.editor{gap:25px}}.editor .redactor__button{background-color:#cebfff}",""]);const o=r},568:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81),s=n.n(a),i=n(645),r=n.n(i)()(s());r.push([e.id,".garage__table{padding:0}.garage__popup{display:none;font-weight:bold;font-size:30px;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);text-align:center;background-color:#fff;padding:20px;border:3px solid #303030;border-radius:10px;box-shadow:3px 3px 0px #303030}@keyframes display{0%{color:rgba(0,0,0,0)}50%{color:#47eb00}100%{color:#47eb00}}.garage__popup_display{padding:10px;animation:1s display infinite steps(3)}.garage-menu{padding:0px;margin:0;margin-bottom:20px}@keyframes hue{from{-webkit-filter:hue-rotate(0deg)}to{-webkit-filter:hue-rotate(360deg)}}.garage-menu__button{background-color:#f5e562}.garage-menu__button_race{animation:hue 5s infinite linear}",""]);const o=r},841:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81),s=n.n(a),i=n(645),r=n.n(i)()(s());r.push([e.id,".winners__section{display:inline-flex;flex-direction:column;background-color:#fff;border:3px solid #303030;border-radius:20px;box-shadow:20px 20px 0px #303030;position:relative;left:50%;transform:translate(-50%, 0);padding:20px;background:repeating-linear-gradient(45deg, #ffc4e3 10px, #fff7df 10px, #fff7df 20px, #ffc4e3 20px, #ffc4e3 30px, #fff7df 30px)}@media(max-width: 767px){.winners__section{box-shadow:10px 10px 0px #303030;padding:20px 5px}}@media(max-width: 425px){.winners__section{padding:20px 5px}}.winners__table{padding:10px;margin:0;display:inline-flex;flex-direction:column;min-height:275px}@media(max-width: 425px){.winners__table{min-height:180px}}.winners__table_container{display:inline-flex;margin-bottom:20px}.winners__item,.winners__table>*{display:grid;grid-template-columns:120px 80px 180px 80px 170px;align-items:center;font-size:1.5rem}@media(max-width: 767px){.winners__item,.winners__table>*{grid-template-columns:18px 80px 140px 47px 68px}}@media(max-width: 425px){.winners__item,.winners__table>*{grid-template-columns:18px 50px 100px 40px 60px}}.winners__table>*>div:nth-child(1){text-align:center}.winners__table>*>div:nth-child(1){text-align:center}.winners__menu{padding:0;align-items:center}.winners__menu>*{font-weight:bold;align-content:center;height:30px;display:flex;align-items:center;padding-left:2px}.winners__menu>div:nth-child(1){align-self:center}.winners__menu_button{cursor:pointer;background-color:#fe9df4}@media(max-width: 767px){.winners__menu_button{padding:2px !important;font-size:1rem !important}}",""]);const o=r},794:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81),s=n.n(a),i=n(645),r=n.n(i)()(s());r.push([e.id,".header{margin-bottom:20px;display:flex;gap:20px;padding:20px}@media(max-width: 767px){.header{justify-content:center}}@media(max-width: 425px){.header{justify-content:center}}.header__buttons_garage{background-color:#62f5d5}.header__buttons_winners{background-color:#f5629f}",""]);const o=r},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,s,i){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(r[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);a&&r[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),t.push(c))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},400:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(379),s=n.n(a),i=n(795),r=n.n(i),o=n(569),l=n.n(o),d=n(565),c=n.n(d),u=n(216),p=n.n(u),h=n(589),m=n.n(h),_=n(731),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),s()(_.Z,f);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},664:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(379),s=n.n(a),i=n(795),r=n.n(i),o=n(569),l=n.n(o),d=n(565),c=n.n(d),u=n(216),p=n.n(u),h=n(589),m=n.n(h),_=n(227),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),s()(_.Z,f);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},412:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(379),s=n.n(a),i=n(795),r=n.n(i),o=n(569),l=n.n(o),d=n(565),c=n.n(d),u=n(216),p=n.n(u),h=n(589),m=n.n(h),_=n(481),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),s()(_.Z,f);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},950:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(379),s=n.n(a),i=n(795),r=n.n(i),o=n(569),l=n.n(o),d=n(565),c=n.n(d),u=n(216),p=n.n(u),h=n(589),m=n.n(h),_=n(430),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),s()(_.Z,f);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},692:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(379),s=n.n(a),i=n(795),r=n.n(i),o=n(569),l=n.n(o),d=n(565),c=n.n(d),u=n(216),p=n.n(u),h=n(589),m=n.n(h),_=n(280),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),s()(_.Z,f);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},112:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(379),s=n.n(a),i=n(795),r=n.n(i),o=n(569),l=n.n(o),d=n(565),c=n.n(d),u=n(216),p=n.n(u),h=n(589),m=n.n(h),_=n(568),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),s()(_.Z,f);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},234:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(379),s=n.n(a),i=n(795),r=n.n(i),o=n(569),l=n.n(o),d=n(565),c=n.n(d),u=n(216),p=n.n(u),h=n(589),m=n.n(h),_=n(841),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),s()(_.Z,f);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},814:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(379),s=n.n(a),i=n(795),r=n.n(i),o=n(569),l=n.n(o),d=n(565),c=n.n(d),u=n(216),p=n.n(u),h=n(589),m=n.n(h),_=n(794),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),s()(_.Z,f);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var i={},r=[],o=0;o<e.length;o++){var l=e[o],d=a.base?l[0]+a.base:l[0],c=i[d]||0,u="".concat(d," ").concat(c);i[d]=c+1;var p=n(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var m=s(h,a);a.byIndex=o,t.splice(o,0,{identifier:u,updater:m,references:1})}r.push(u)}return r}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var i=a(e=e||[],s=s||{});return function(e){e=e||[];for(var r=0;r<i.length;r++){var o=n(i[r]);t[o].references--}for(var l=a(e,s),d=0;d<i.length;d++){var c=n(i[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=l}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,s&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},858:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function r(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(527)),r=n(726);t.default=class{static getResponseWithCount(e){return a(this,void 0,void 0,(function*(){try{const t=yield fetch(e);if(t.status===r.EResponseStatuses.success){const e=t.headers.get("X-Total-Count"),n=yield t.json();if(e&&n)return{count:+e,data:n}}}catch(e){}return null}))}static getCars(e){return a(this,void 0,void 0,(function*(){const t=`?_page=${e}&_limit=${r.EConstants.CARS_PER_PAGE}`,n=this.getGarageUrl()+t;try{const e=yield fetch(n);if(e.status===r.EResponseStatuses.success){const t=e.headers.get("X-Total-Count"),n=yield e.json();if(t&&n)return{count:+t,cars:n}}}catch(e){}return null}))}static getCar(e){return a(this,void 0,void 0,(function*(){const t=`${this.getGarageUrl()}/${e}`;return yield this.load(t)}))}static createCar(e,t){return a(this,void 0,void 0,(function*(){const n=`${this.getGarageUrl()}`,a=this.getInit(r.EHTTPMethods.POST,{name:e,color:t});return yield this.load(n,a)}))}static updateCar(e,t){return a(this,void 0,void 0,(function*(){const n=`${this.getGarageUrl()}/${e}`,a=this.getInit(r.EHTTPMethods.PUT,t);return yield this.load(n,a)}))}static removeCarGarage(e){return a(this,void 0,void 0,(function*(){const t=`${this.getGarageUrl()}/${e}`,n=this.getInit(r.EHTTPMethods.DELETE);return yield this.load(t,n),Promise.resolve()}))}static removeCarWinners(e){return a(this,void 0,void 0,(function*(){const t=`${this.getWinnersUrl()}/${e}`,n=this.getInit(r.EHTTPMethods.DELETE);return yield this.load(t,n),Promise.resolve()}))}static getWinners(e=1,t,n){return a(this,void 0,void 0,(function*(){const a=this.createWinnersOptions(e,t,n),s=this.getWinnersUrl()+a;try{const e=yield fetch(s);if(e.status===r.EResponseStatuses.success){const t=e.headers.get("X-Total-Count"),n=yield e.json();if(t&&n)return{count:+t,winners:n}}}catch(e){}return null}))}static getWinner(e){return a(this,void 0,void 0,(function*(){const t=`${this.getWinnersUrl()}/${e}`;return yield this.load(t)}))}static createWinner(e,t){return a(this,void 0,void 0,(function*(){const n=`${this.getWinnersUrl()}`,a={id:e,time:t,wins:1},s=this.getInit(r.EHTTPMethods.POST,a);return yield this.load(n,s)}))}static updateWinner(e,t,n){return a(this,void 0,void 0,(function*(){const a=`${this.getWinnersUrl()}/${e}`,s={wins:t,time:n},i=this.getInit(r.EHTTPMethods.PUT,s);return yield this.load(a,i)}))}static saveRaceWinnerResult(e,t){return a(this,void 0,void 0,(function*(){const n=i.default.msToSec(t),a=yield this.getWinner(e);if(a){const{wins:t}=a,s=a.time>n?n:a.time;return this.updateWinner(e,t+1,s)}return this.createWinner(e,n)}))}static getEngineData(e,t){return a(this,void 0,void 0,(function*(){const n=`${this.getEngineUrl()}?id=${e}&status=${t}`,a=this.getInit(r.EHTTPMethods.PATCH);return yield this.load(n,a)}))}static getGarageUrl(){return`${r.EUrls.base}${r.EUrls.garage}`}static getEngineUrl(){return`${r.EUrls.base}${r.EUrls.engine}`}static getWinnersUrl(){return`${r.EUrls.base}${r.EUrls.winners}`}static createWinnersOptions(e=1,t,n){let a=`?_page=${e}&_limit=${r.EConstants.WINNERS_PER_PAGE}`;return t&&(a+=`&_sort=${t}`),n&&(a+=`&_order=${n}`),a}static getInit(e,t){const n={method:e};if(t){const e=JSON.stringify(t);n.body=e,n.headers={"Content-Type":"application/json"}}return n}static load(e,t){return a(this,void 0,void 0,(function*(){try{const n=yield fetch(e,t);if(n.status===r.EResponseStatuses.success||n.status===r.EResponseStatuses.created)return(yield n.json())||null;throw new Error(`[API] load error: ${n.status} ${n.statusText}`)}catch(e){}return null}))}}},844:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(362));n(400),t.default=class{constructor(){this._view=new s.default}start(){this._view.render()}}},21:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=e=>e.replace(/,/g," ").replace(/\./g," ").replace(/\s{2,}/g," ").trim();t.default=class{static createElement(e="div",t={}){const n=document.createElement(e);return t.classes&&this.addClassesToElement(n,t.classes),t.attrs&&this.addAttrToElement(n,t.attrs),t.dataset&&this.addDatasetToElement(n,t.dataset),t.content&&this.addContentToElement(n,t.content),t.id&&(n.id=t.id.replace(/#/g," ").replace(/\s{2,}/g," ").trim()),n}static addClassesToElement(e,t){let a;a="string"==typeof t?n(t).split(" "):t.map((e=>n(e))),e.classList.add(...a)}static addAttrToElement(e,t){for(const n in t){const a=t[n];e.setAttribute(n,a.toString())}}static addDatasetToElement(e,t){for(const n in t){const a=t[n];e.dataset[n]=a.toString()}}static addContentToElement(e,t){"string"==typeof t?e.innerHTML=t:t instanceof HTMLElement?e.append(t):Array.isArray(t)&&t.forEach((t=>{"string"==typeof t?e.insertAdjacentHTML("beforeend",t):e.append(t)}))}}},527:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(726),s=["Acura","Alfa Romeo","Aston Martin","Audi","Bentley","BMW","Cadillac","Chevrolet","Chrysler","Citroen","Dacia","Dodge","Ferrari","Fiat","Ford","Honda","Hyundai","Infiniti","Jaguar ","Jeep","Kia","Lamborghini","Lancia","Land Rover","Lexus","Lincoln","Lotus","Maserati","Mazda ","Mercedes","Mitsubishi","Nissan","Opel","Peugeot","Porsche","Renault","Seat","Skoda","Subaru","Tesla","Toyota","Volkswagen","Volvo"],i=["Q3","Q3","Q4","Q4","Q5","Q5","Q7","Q7","Q8","Q8","A3","A3","A4","A4","A5","A5","A6","A6","A7","A7","A8","A8","TT","TT","R8","R8","DB11","DBX","DB9"];class r{static msToSec(e){return Math.round(e/a.EConstants.MS_IN_SEC*100)/100}static generateCarName(){const e=s.length,t=Math.round(Math.random()*(e-1)),n=i.length,a=Math.round(Math.random()*(n-1));return`${s[t]} ${i[a]}`}static generateHEXColor(){return`#${r.getRandomColor16BitColor()}${r.getRandomColor16BitColor()}${r.getRandomColor16BitColor()}`}static getRandomColor16BitColor(){return Math.round(Math.random()*a.EConstants.FF_16_Bit).toString(16)}}t.default=r},362:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(726),i=a(n(21)),r=a(n(408)),o=a(n(545));n(814),t.default=class{constructor(){this._pages={[s.EAppPages.garage]:new r.default,[s.EAppPages.winners]:new o.default},this._currentPage=null;const e=this.createHeaderButtons(),t=i.default.createElement("header",{classes:"header",content:e});this._elements={header:t,main:i.default.createElement("main")},this.applyEvents(),this.renderPage(s.EAppPages.garage)}applyEvents(){const{header:e}=this._elements;e.addEventListener("click",(e=>{if(e.target!==e.currentTarget){const t=e.target.dataset[s.EHTMLDataSet.page];t&&this.renderPage(t)}}))}createHeaderButtons(){return[i.default.createElement("button",{classes:"button header__buttons header__buttons_garage",content:"To Garage",dataset:{[s.EHTMLDataSet.page]:s.EAppPages.garage}}),i.default.createElement("button",{classes:"button header__buttons header__buttons_winners",content:"To Winners",dataset:{[s.EHTMLDataSet.page]:s.EAppPages.winners}})]}renderPage(e){if(this._currentPage===e)return;this._currentPage=e;const{main:t}=this._elements;t.innerHTML="",e===s.EAppPages.winners&&this._pages[e].update(),t.append(this._pages[e].getElement())}render(){document.body.append(this._elements.header,this._elements.main)}}},975:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function r(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(858)),r=n(726),o=s(n(21));n(664);class l{constructor(e){this._name="",this._color="#000000",this._animation={id:0,stopped:!0,position:0,timestamp:0,pxPerSec:0,startTime:0,speed:0},this._engineData=null,this._commonElements={icon:this.createIcon()},this._winnersElements=this.createWinnersElements(),this._garageElements=this.createGarageElements(),this.startEngine=e=>a(this,void 0,void 0,(function*(){this._garageElements.engineButtons.start.disabled=!0,this.disableEditButtons(!0);const t=yield i.default.getEngineData(this._id,r.EEngineStatuses.started),n=this.resetAnimationData();return t&&(this._engineData=t,this._garageElements.engineButtons.stop.disabled=!1,this.driveAnimation(e),this.sendDriveRequest(n)),t})),this.sendDriveRequest=e=>a(this,void 0,void 0,(function*(){(yield i.default.getEngineData(this._id,r.EEngineStatuses.drive))||this._animation.stopped||e===this._animation.id&&this.broke()})),this.stop=()=>a(this,void 0,void 0,(function*(){this._garageElements.engineButtons.stop.disabled=!0;const e=yield i.default.getEngineData(this._id,r.EEngineStatuses.stopped);return e&&this.reset(),e})),this.finish=e=>{if(this._animation.stopped=!0,e){const t=Date.now()-this._animation.startTime;e(this._name,t)&&this.saveResult(t)}},this.broke=()=>{this.showBrokeIcon(!0),this._animation.stopped=!0},this.reset=()=>{this.showBrokeIcon(!1),this.disableEditButtons(!1);const{start:e,stop:t}=this._garageElements.engineButtons;this._animation.stopped=!0,e.disabled=!1,t.disabled=!0,this._garageElements.car.style.transform="translate(0px, 0px)"},this.driveAnimation=e=>{if(!this._engineData||this._animation.stopped)return;const{distance:t,velocity:n}=this._engineData,a=t/n;this._animation.speed=a;const s=this._garageElements.car,i=s.clientWidth,o=this._garageElements.track.clientWidth;if(0===o)return;const l=o-i,d=l/a*r.EConstants.MS_IN_SEC;this._animation.pxPerSec=d;const c=this._animation.timestamp,u=Date.now();this._animation.timestamp=u;const p=u-c;this._animation.position+=p/r.EConstants.MS_IN_SEC*d,s.style.transform=`translate(${Math.floor(this._animation.position)}px, 0px)`,this._animation.position<l?requestAnimationFrame((()=>this.driveAnimation(e))):this.finish(e)},this._id=e.id,this.setName(e.name),this.setColor(e.color),this._garageElements.element.dataset[r.EHTMLDataSet.carId]=this._id.toString(),this._garageElements.engineButtons.stop.disabled=!0,this.applyEvents(),l.memory[this._id]=this}getGarageElement(){return this._garageElements.element}getWinnersElement(e,t,n){this._animation.stopped=!0;const a=this._winnersElements;return a.marker.innerHTML=e.toString(),a.counter.innerHTML=t.toString(),a.time.innerHTML=n.toString(),a.element}setColor(e){this._color=e;const t=this._garageElements.car.querySelector('[data-name="body"]'),n=this._winnersElements.car.querySelector('[data-name="body"]');t.style.fill=e,n.style.fill=e}getColor(){return this._color}setName(e){this._name=e,this._garageElements.name.innerHTML=e,this._winnersElements.name.innerHTML=e}getName(){return this._name}getId(){return this._id}disableEditButtons(e){const{select:t,remove:n}=this._garageElements.editButtons;t.disabled=e,n.disabled=e}saveResult(e){i.default.saveRaceWinnerResult(this._id,e)}resetAnimationData(){this.showBrokeIcon(!1);const e=Date.now(),t=Math.random();return this._animation.id=t,this._animation.timestamp=e,this._animation.startTime=e,this._animation.stopped=!1,this._animation.pxPerSec=0,this._animation.position=0,t}applyEvents(){const e=this._garageElements.engineButtons;e.start.addEventListener("click",(()=>this.startEngine())),e.stop.addEventListener("click",this.stop)}showBrokeIcon(e){const t=this._garageElements.car.querySelector(".car-item__icon-broke");t&&(t.style.display=e?"flex":"none")}createIcon(){return o.default.createElement("object",{content:'\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 58">\n            <path data-name="body" d="M196.78,37.46c-2.14.89-4.29,1.77-6.43,2.68a.75.75,0,0,0-.4.58,9,9,0,0,0,.45,2.67c.29.66,\n                                1,1.12,1.57,1.66a8.47,8.47,0,0,1-2.14.6c-4.46.05-8.94.2-13.37-.17-.64,\n                                0-1.4-2.63-1.55-4.1-.87-8.74-7.54-14.91-16-14.6-9.13.33-15.32,6.42-15.74,\n                                15.3a27.84,27.84,0,0,1-1.09,5.77c-.12.43-1.1.88-1.69.88-8.36.06-16.73,\n                                0-25.09.06-16.77,0-33.54-.09-50.31.27-4.8.1-5.16-2.73-5-5.79.54-9-5-17.26-13.75-19.18-6.52-1.43-12.84-.65-17.49,\n                                4.81s-4.85,11.55-2.75,18a3.89,3.89,0,0,1,.09.61,9,9,0,0,\n                                1-2.6-.45c-3.93-2-7.7-4.39-11.74-6.15-2.05-.89-4.65-.48-6.82-1.2-1-.33-1.6-2-2.38-3l1.5-.28a.52.52,\n                                0,0,0,.16-.09c-.28-.53-.44-1.33-.88-1.54-2.06-1-2.5-5.74-1.25-7.47A9.87,9.87,0,0,0,3.51,21.9c0-7.28,\n                                5-8.74,10.63-9.84C28.35,9.28,42.43,5.25,56.77,3.84a249.16,249.16,0,0,1,44.63-.08c7.15.59,13.91,5.38,\n                                21,7.94A82.31,82.31,0,0,0,137.15,16C151.5,18.25,165.92,20,180.3,22.1a78.24,78.24,0,0,1,12.81,2.4c1.4.45,\n                                2,3.3,3,5,.53.87,1.24,1.64,1.86,2.46v1.62l-1.14,3.79ZM114,18.29a27.82,27.82,0,0,1,.6-4.6c.09-.33,1.54-.29,\n                                2.36-.42-.88-.48-1.74-1-2.64-1.42-.4-.21-.86-.29-1.29-.47C107.87,9.27,102.89,6,97.56,5.27c-8.47-1.22-17.19-.85-25.8-1-.67,\n                                0-1.88,1.21-2,2a40.73,40.73,0,0,0-.13,8.11,3.49,3.49,0,0,0,2.26,2.46c7.09.44,14.19.61,21.28.84C100.13,17.88,107.05,18.08,114,\n                                18.29Zm-77-1.66c4.56,0,9.13-.19,13.68.08,2.67.15,3.66-.92,3.93-3.29.11-1,.87-2.17.51-2.78-.9-1.54,4.78-6-2-4.79Q39.95,8.21,26.89,11a11.21,\n                                11.21,0,0,0-5.6,2.86c-1.08,1.16-.77,3,2,2.8C27.8,16.45,32.37,16.63,36.93,16.63Z"/>\n            <circle cx="42.5" cy="41.5" r="16.5"/>\n            <circle cx="159" cy="43" r="15"/>\n        </svg>\n        '})}createGarageElements(){const e=o.default.createElement("li",{classes:"car-item car-item_garage"}),t=o.default.createElement("div",{classes:"car-item__header"}),n=this.createEditButtons(),a=o.default.createElement("h3");t.append(n.select,n.remove,a),e.append(t);const s=o.default.createElement("div",{classes:"car-item__body"});e.append(s);const i=o.default.createElement("div"),r=this.createEngineButtons();i.append(r.start,r.stop),s.append(i);const l=this.createTrackElements(),d=l[0];return s.append(d),{element:e,track:d,name:a,car:l[1],editButtons:n,engineButtons:r}}createWinnersElements(){const e=o.default.createElement("li",{classes:"car-item car-item_winners"}),t=o.default.createElement("div",{}),n=this._commonElements.icon.cloneNode(!0),a=o.default.createElement("div",{classes:"car-item__icon-container_winners",content:['<div class="car-item__icon-broke">!</div>',n]}),s=o.default.createElement("div",{content:this._name}),i=o.default.createElement("div",{}),r=o.default.createElement("div",{});return e.append(t,a,s,i,r),{element:e,marker:t,name:s,counter:i,time:r,car:a}}createEditButtons(){return{select:o.default.createElement("button",{classes:"button",content:"edit",dataset:{[r.EHTMLDataSet.button]:"true",[r.EHTMLDataSet.buttonAction]:r.ERedactorActions.select}}),remove:o.default.createElement("button",{classes:"button",content:"Remove",dataset:{[r.EHTMLDataSet.button]:"true",[r.EHTMLDataSet.buttonAction]:r.ERedactorActions.remove}})}}createEngineButtons(){return{start:o.default.createElement("button",{classes:"button car-item__control-btn car-item__start",content:"A"}),stop:o.default.createElement("button",{classes:"button car-item__control-btn car-item__stop",content:"B"})}}createTrackElements(){const e=o.default.createElement("div",{classes:"car-item__track display"}),t=o.default.createElement("div",{classes:"car-item__track_inner display__inner"}),n=this._commonElements.icon.cloneNode(!0),a=o.default.createElement("div",{classes:"car-item__icon-container_garage",content:['<div class="car-item__icon-broke"></div>',n]});return t.append(a),e.append(t),[e,a]}}t.default=l,l.memory={}},332:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function r(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(21));n(412);class r{constructor(e,t){this._currentPage=1,this._allItemsCount=0,this.update=()=>a(this,void 0,void 0,(function*(){})),this._maxItemsPerPage=t,e=e.trim(),this._name=e;const n=e[0].toUpperCase()+e.slice(1).toLowerCase(),s=i.default.createElement("section",{classes:`${e}__section`}),o=i.default.createElement("header"),l=i.default.createElement("span",{}),d=i.default.createElement("h2",{classes:"table__title",content:[`${n} `,l]}),c=i.default.createElement("span",{}),u=i.default.createElement("h3",{classes:"table__subtitle",content:["Page ",c]}),p=i.default.createElement("ul",{classes:`${e}__table`}),h=i.default.createElement("div",{classes:`${e}__table_container`,content:p}),m=r.createFooter();o.append(d,u),s.append(o,h,m.element),this._elements={element:s,header:o,counter:l,list:p,listContainer:h,page:c,footer:m},this.updatePageElement()}static createFooter(){const e=i.default.createElement("footer"),t=i.default.createElement("button",{classes:"button",content:"Prev"}),n=i.default.createElement("button",{classes:"button",content:"Next"});return e.append(t,n),{element:e,buttons:{prev:t,next:n}}}updatePageElement(){const{prev:e,next:t}=this._elements.footer.buttons;t.disabled=!1,e.disabled=!1,1===this._currentPage&&(e.disabled=!0),this._currentPage*this._maxItemsPerPage>=this._allItemsCount&&(t.disabled=!0),this._elements.page.innerHTML=`#${this._currentPage}`}setAllItemsCount(e){this._allItemsCount=e,this._elements.counter.innerHTML=`(${e})`}applyEvents(){this.applyFooterEvents()}disablePagination(e){const{prev:t,next:n}=this._elements.footer.buttons;t.disabled=e,n.disabled=e,e||this.updatePageElement()}applyFooterEvents(){const{prev:e,next:t}=this._elements.footer.buttons;e.addEventListener("click",(()=>{this._currentPage-=1,this.updatePageElement(),this.update()})),t.addEventListener("click",(()=>{this._currentPage+=1,this.updatePageElement(),this.update()}))}getElement(){return this._elements.element}}t.default=r},408:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function r(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(858)),r=s(n(21)),o=s(n(306)),l=s(n(599));t.default=class{constructor(){this._selectedCarId=null,this.selectCar=e=>a(this,void 0,void 0,(function*(){this._selectedCarId=e;const t=yield i.default.getCar(e);return t&&this._editor.selectCar(t),Promise.resolve()})),this.updateCar=(e,t)=>a(this,void 0,void 0,(function*(){if(this._selectedCarId){const n=yield i.default.updateCar(this._selectedCarId,{name:e,color:t});return n&&this._table.updateCar(n),n}return Promise.resolve(null)})),this.createCar=(e,t)=>a(this,void 0,void 0,(function*(){const n=yield i.default.createCar(e,t);return this._table.update(),n})),this.removeCar=e=>a(this,void 0,void 0,(function*(){return yield i.default.removeCarGarage(e),yield i.default.removeCarWinners(e),this._selectedCarId===e&&this._editor.clearUpdateField(),this._table.update()})),this._editor=new o.default(this.createCar,this.updateCar),this._table=new l.default(this.selectCar,this.removeCar);const e=r.default.createElement("section",{content:[this._editor.getElement(),this._table.getElement()]});this._elements={element:e}}update(){this._table.update()}getElement(){return this._elements.element}}},306:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(726),i=a(n(21)),r=a(n(266));n(692),t.default=class{constructor(e,t){const n=new r.default(s.ERedactorActions.create,((t,n,a)=>{e(t,n).then((()=>a(!1)))})),a=new r.default(s.ERedactorActions.update,((e,n,a)=>{t(e,n).then((()=>a(!0)))}));a.disableAll(!0);const o=i.default.createElement("section",{classes:"editor",content:[n.getElement(),a.getElement()]});this._elements={container:o,create:n,update:a}}clearUpdateField(){this._elements.update.disableAll(!0)}selectCar(e){const{update:t}=this._elements;t.setColor(e.color),t.setInput(e.name),t.disableAll(!1)}getElement(){return this._elements.container}}},266:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(616),i=a(n(21));n(950),t.default=class{constructor(e,t){this._onChangeCallback=null,this.clearAll=e=>{const{input:t,color:n}=this._elements;t.value="",n.value="#000000",this.disableAll(e)};const n=e=>i.default.createElement("input",e),a=n({classes:"redactor__input_inner display__inner",attrs:{type:"text"}}),s=i.default.createElement("div",{classes:"redactor__input display",content:a}),r=n({classes:"redactor__color",attrs:{type:"color"}}),o=n({classes:"button redactor__button",attrs:{type:"button",value:e}}),l=i.default.createElement("div",{classes:"redactor",content:[s,r,o]});this._elements={element:l,input:a,color:r,button:o},t&&this.setChangeCallback(t),this.applyEvents()}applyEvents(){const{input:e,button:t,color:n}=this._elements;t.addEventListener("click",(()=>{const t=n.value;this._onChangeCallback&&(0,s.isColorHex)(t)&&(this.disableAll(!0),this._onChangeCallback(e.value,t,this.clearAll))}))}setChangeCallback(e){this._onChangeCallback=e}disableAll(e){const{input:t,button:n,color:a}=this._elements;t.disabled=e,n.disabled=e,a.disabled=e}setColor(e){(0,s.isColorHex)(e)&&(this._elements.color.value=e)}setInput(e){this._elements.input.value=e}getElement(){return this._elements.element}}},599:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function r(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(858)),r=n(726),o=s(n(21)),l=s(n(527)),d=s(n(975)),c=s(n(332));n(112);class u extends c.default{constructor(e,t){super(r.EAppPages.garage,r.EConstants.CARS_PER_PAGE),this._raceMode=!1,this._addedElements={menu:this.createMenu(),popUp:this.createPopUpElement()},this._carsList=[],this.race=()=>a(this,void 0,void 0,(function*(){if(0===this._carsList.length)return;this.disablePagination(!0),this._raceMode=!0,this._addedElements.menu.buttons.race.disabled=!0,yield this.resetAll();let e=!0;const t=(t,n)=>e&&(e=!1,this._raceMode)?(this.showWinnerMessage(t,n),!0):e,n=this._carsList.map((e=>e.startEngine(t)));Promise.allSettled(n).then((()=>{this._addedElements.menu.buttons.reset.disabled=!1,this.disablePagination(!1)}))})),this.resetAll=e=>a(this,void 0,void 0,(function*(){this._raceMode=!e,this.showPopUp(!1),this.disableMenuButtons(!0);const t=this._carsList.map((e=>e.stop())),n=yield Promise.allSettled(t);return e&&"click"===e.type&&this.disableMenuButtons(!1),n})),this.generateCars=()=>a(this,void 0,void 0,(function*(){const{generate:e}=this._addedElements.menu.buttons;e.disabled=!0;const t=[];for(let e=0;e<r.EConstants.CARS_GENERATOR;e+=1){const e=l.default.generateCarName(),n=l.default.generateHEXColor(),a=i.default.createCar(e,n);t.push(a)}yield Promise.allSettled(t),e.disabled=!1,this.update()})),this.update=()=>a(this,void 0,void 0,(function*(){const e=yield i.default.getCars(this._currentPage);e&&(this.disableMenuButtons(!1),this.setAllItemsCount(e.count),this.updatePageElement(),this.fillList(e.cars))})),this._callbacks={[r.ERedactorActions.select]:e,[r.ERedactorActions.remove]:t},this._elements.header.prepend(this._addedElements.menu.element),this._elements.element.append(this._addedElements.popUp.element),this.applyEvents(),this.update()}updateCar(e){const t=this._carsList.find((t=>t.getId()===e.id));t&&(t.setName(e.name),t.setColor(e.color))}createMenu(){const e=o.default.createElement("menu",{classes:"garage-menu"}),t=o.default.createElement("button",{classes:"button garage-menu__button garage-menu__button_race",content:"Race"}),n=o.default.createElement("button",{classes:"button garage-menu__button",content:"Reset"}),a=o.default.createElement("button",{classes:"button garage-menu__button",content:`Generate${r.EConstants.CARS_GENERATOR}`});return e.append(t,n,a),{element:e,buttons:{race:t,reset:n,generate:a}}}applyEvents(){super.applyEvents(),this.applyMenuEvents(),this.applyListEvents()}showPopUp(e,t,n){const{element:a,name:s,time:i}=this._addedElements.popUp;e?t&&n&&(s.innerHTML=t,i.innerHTML=n.toString(),a.style.display="block",setTimeout((()=>{this.showPopUp(!1)}),r.EConstants.POP_UP_SHOW_TIME)):a.style.display="none"}createPopUpElement(){const e=o.default.createElement("span"),t=o.default.createElement("span"),n=o.default.createElement("div",{classes:"display__inner garage__popup_display",content:["Winner: ",e," time: ",t,"s"]}),a=o.default.createElement("div",{classes:"display",content:n});return{element:o.default.createElement("div",{classes:"garage__popup",content:a}),name:e,time:t}}showWinnerMessage(e,t){this.disableMenuButtons(!1),this.showPopUp(!0,e,l.default.msToSec(t))}applyListEvents(){const{list:e}=this._elements;e.addEventListener("click",(e=>{if(e.target&&e.target instanceof HTMLElement){const{dataset:t}=e.target;if(t[r.EHTMLDataSet.button]){const n=t[r.EHTMLDataSet.buttonAction],a=e.target.closest(".car-item");if(n&&a){const e=a.dataset[r.EHTMLDataSet.carId];if(e){const t=+e;if(Number.isNaN(t))return;switch(n){case r.ERedactorActions.remove:this._callbacks.remove(t);break;case r.ERedactorActions.select:this._callbacks.select(t)}}}}}}))}applyMenuEvents(){const{race:e,reset:t,generate:n}=this._addedElements.menu.buttons;e.addEventListener("click",this.race),t.addEventListener("click",this.resetAll),n.addEventListener("click",this.generateCars)}disableMenuButtons(e){const{race:t,reset:n,generate:a}=this._addedElements.menu.buttons;t.disabled=e,n.disabled=e,a.disabled=e}fillList(e){const t=e.map((e=>new d.default(e)));this._carsList=t;const n=t.map((e=>e.getGarageElement())),{list:a}=this._elements;a.innerHTML="",a.append(...n)}}t.default=u},545:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(21)),i=a(n(910));t.default=class{constructor(){const e=s.default.createElement("section");this._table=new i.default,e.append(this._table.getElement()),this._elements={element:e}}update(){this._table.update()}getElement(){return this._elements.element}}},910:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function r(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);function a(n){t[n]=e[n]&&function(t){return new Promise((function(a,s){!function(e,t,n,a){Promise.resolve(a).then((function(t){e({value:t,done:n})}),t)}(a,s,(t=e[n](t)).done,t.value)}))}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(858)),o=n(726),l=i(n(21)),d=i(n(975)),c=i(n(332));var u;n(234),function(e){e.wins="Wins",e.time="Time (s)"}(u||(u={}));class p extends c.default{constructor(){super(o.EAppPages.winners,o.EConstants.WINNERS_PER_PAGE),this._addedElements={menu:this.createMenu()},this._sortOrder=null,this._sortSelected=null,this.update=()=>a(this,void 0,void 0,(function*(){const e=yield r.default.getWinners(this._currentPage,this._sortSelected,this._sortOrder);e&&(this.setAllItemsCount(e.count),this.updatePageElement(),this.fillList(e.winners))})),this.handleSorting=e=>{const t=e.target.dataset[o.EHTMLDataSet.sorting];this._sortSelected=t,this._sortOrder=this._sortOrder===o.EWinnersSortsOrder.ASC?o.EWinnersSortsOrder.DESC:o.EWinnersSortsOrder.ASC;const n=t===o.EWinnersSorts.wins?o.EWinnersSorts.time:o.EWinnersSorts.wins;this._addedElements.menu[n].innerHTML=u[n],this._addedElements.menu[t].innerHTML=u[t]+o.EWinnersSortsOrderChars[this._sortOrder],this.update()},this.fillList=e=>{var t,n;return a(this,void 0,void 0,(function*(){var a,i;this._elements.list.innerHTML="";let o=0;const l=[];try{for(t=s(e);!(n=yield t.next()).done;){const e=n.value;let t;if(o+=1,d.default.memory[e.id])t=d.default.memory[e.id].getWinnersElement(o,e.wins,e.time),l.push(t);else{const n=yield r.default.getCar(e.id);n&&(t=new d.default(n).getWinnersElement(o,e.wins,e.time),l.push(t))}}}catch(e){a={error:e}}finally{try{n&&!n.done&&(i=t.return)&&(yield i.call(t))}finally{if(a)throw a.error}}this._elements.list.append(...l)}))},this._elements.listContainer.classList.add("display"),this._elements.list.classList.add("display__inner"),this._elements.header.append(this._addedElements.menu.element),this.update(),this.applyEvents()}applyEvents(){super.applyEvents();const{time:e,wins:t}=this._addedElements.menu;e.addEventListener("click",this.handleSorting),t.addEventListener("click",this.handleSorting)}createMenu(){const e=l.default.createElement("menu",{classes:"winners__menu, winners__item"}),t=l.default.createElement("div",{content:"N"}),n=l.default.createElement("div",{content:"Car"}),a=l.default.createElement("div",{content:"Name"}),s=l.default.createElement("div",{classes:"winners__menu_button button",content:u.wins,dataset:{[o.EHTMLDataSet.sorting]:o.EWinnersSorts.wins}}),i=l.default.createElement("div",{classes:"winners__menu_button button",content:u.time,dataset:{[o.EHTMLDataSet.sorting]:o.EWinnersSorts.time}});return e.append(t,n,a,s,i),{element:e,wins:s,time:i}}}t.default=p},607:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),(new(a(n(844)).default)).start()},726:(e,t)=>{var n,a,s,i,r,o,l,d,c,u,p;Object.defineProperty(t,"__esModule",{value:!0}),t.EHTMLDataSet=t.EHTTPMethods=t.EWinnersSortsOrderChars=t.EWinnersSortsOrder=t.EWinnersSorts=t.EEngineStatuses=t.ERedactorActions=t.EResponseStatuses=t.EUrls=t.EConstants=t.EAppPages=void 0,(p=t.EAppPages||(t.EAppPages={})).garage="garage",p.winners="winners",(u=t.EConstants||(t.EConstants={}))[u.HEX_COLOR_STRING_LENGTH=7]="HEX_COLOR_STRING_LENGTH",u[u.MS_IN_SEC=1e3]="MS_IN_SEC",u[u.CARS_PER_PAGE=7]="CARS_PER_PAGE",u[u.WINNERS_PER_PAGE=10]="WINNERS_PER_PAGE",u[u.FF_16_Bit=255]="FF_16_Bit",u[u.CARS_GENERATOR=100]="CARS_GENERATOR",u[u.POP_UP_SHOW_TIME=4e3]="POP_UP_SHOW_TIME",(c=t.EUrls||(t.EUrls={})).base="http://127.0.0.1:3000",c.garage="/garage",c.engine="/engine",c.winners="/winners",(d=t.EResponseStatuses||(t.EResponseStatuses={}))[d.success=200]="success",d[d.created=201]="created",(l=t.ERedactorActions||(t.ERedactorActions={})).create="create",l.update="update",l.select="select",l.remove="remove",(o=t.EEngineStatuses||(t.EEngineStatuses={})).started="started",o.drive="drive",o.stopped="stopped",(r=t.EWinnersSorts||(t.EWinnersSorts={})).wins="wins",r.time="time",(i=t.EWinnersSortsOrder||(t.EWinnersSortsOrder={})).ASC="ASC",i.DESC="DESC",(s=t.EWinnersSortsOrderChars||(t.EWinnersSortsOrderChars={})).ASC="🠗",s.DESC="🠕",(a=t.EHTTPMethods||(t.EHTTPMethods={})).GET="GET",a.POST="POST",a.PATCH="PATCH",a.PUT="PUT",a.DELETE="DELETE",(n=t.EHTMLDataSet||(t.EHTMLDataSet={})).page="page",n.button="isButton",n.buttonAction="buttonAction",n.carId="carId",n.sorting="sorting"},616:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCarDataArr=t.isCarData=t.isColorHex=void 0;const a=n(726);t.isColorHex=e=>{if(!e||e.length<a.EConstants.HEX_COLOR_STRING_LENGTH||"#"!==e[0])return!1;const t=`0x${e.slice(1)}`;return!Number.isNaN(+t)},t.isCarData=e=>!!(e&&e instanceof Object&&e.id&&"number"==typeof e.id&&e.name&&"string"==typeof e.name&&e.color&&(0,t.isColorHex)(e.color)),t.isCarDataArr=e=>e.every((e=>(0,t.isCarData)(e)))},885:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKBAMAAAB/HNKOAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABJQTFRFAAAAAAAAAAAAAAAAAAAAAAAA4CsZogAAAAZ0Uk5TAEDf4P/wzxkp2QAAAB5JREFUeJxjYMAEjEoCQJLZRQFIsroYgESMBbCoAwAnOQFYisYOwwAAAABJRU5ErkJggg=="}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={id:a,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.b=document.baseURI||self.location.href,n.nc=void 0,n(607)})();